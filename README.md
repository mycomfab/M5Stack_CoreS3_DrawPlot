# M5Stack CoreS3 DrawPlot

このプロジェクトは、M5Stack CoreS3のタッチパネルを使用して自由に線を描き、その描画データをシリアル経由で外部へ送信するためのプログラムです。

## 特徴

- タッチパネルで自由に線を描画
- 描画データを内部バッファに保存
- ボタン操作で描画データの「取り消し」「クリア」「プロット（送信）」「送信待機」などが可能
- UART経由で外部デバイスへデータ送信（ボーレート: 9600）

## 必要なもの

- M5Stack CoreS3
- Arduino IDE（推奨バージョン1.8以上）
- M5Stackライブラリ（`M5CoreS3`）

## インストール手順

1. Arduino IDEをインストール
2. ボードマネージャで「ESP32 by Espressif Systems」を追加し、M5Stack CoreS3ボードを選択
3. 必要なライブラリをインストール（例: `M5CoreS3`）
4. このリポジトリをクローンまたはZIPでダウンロード
5. `m5cores3_drawplot.ino` をArduino IDEで開く
6. ボードとポートを選択し、スケッチを書き込み

## 操作方法

1. デバイスを起動すると、画面左側（240x240ピクセル）に描画エリアが表示されます。
2. 指でなぞることで線を描くことができます。
3. 画面右側には4つのボタンがあり、以下の操作が可能です：

| ボタン | 機能             |
|--------|------------------|
| Undo   | 最後の線を取り消す |
| Clear  | 全消去           |
| Plot   | UART経由でデータ送信 |
| Wait   | 送信後に待機状態に戻る |

## データ送信フォーマット

送信されるデータは以下の特殊コードを含むバイナリ形式です：

- `0xFB` : プロット開始
- `0xFA` : プロット終了
- `0xFE` : ペンを下ろす（描画中）
- `0xFD` : ペンを上げる（非描画移動）

## 備考

- UART TX: GPIO2, RX: GPIO1 を使用
- データは最大32,768バイトまで記録可能

## ライセンス

MITライセンス

## リンク

- [ソースコードを見る](https://github.com/mycomfab/M5Stack_CoreS3_DrawPlot/blob/main/m5cores3_drawplot.ino)
